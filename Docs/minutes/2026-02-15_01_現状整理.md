# 現状の問題点・課題整理（次作業者向け）

## 1. 現在確認できる問題点

### 1-1. リポジトリの実体がほぼ存在しない
- 現時点で確認できる管理対象ファイルは `requirements.txt` のみで、内容も空です。
- アプリケーション本体（ソースコード・設定・実行スクリプト）が見当たらないため、実装・検証・運用いずれも開始できません。
>>追記）Taoにて追加

### 1-2. 目的・スコープが未定義
- 「ygo-daemon」として何を常駐実行するか（例：データ収集、対戦監視、通知、バッチ）に関する仕様情報が不足しています。
- 要件（機能要件・非機能要件）が未確定のため、設計判断の前提がありません。
>>追記）「YGOPRODeck_Sync_Technical_Spec.md」を技術仕様書として追加

### 1-3. 開発・実行基盤の不足
- Pythonプロジェクトとして必要な初期構成（`pyproject.toml` / `setup.cfg` / `src/` など）が未整備です。
- 依存ライブラリが未定義（`requirements.txt` 空）で、環境再現性がありません。
- テスト基盤（`tests/`、CI設定、静的解析設定）がなく、品質保証ができません。
>>追記）「YGOPRODeck_Sync_Technical_Spec.md」を参考に時期作業者が作成必須

### 1-4. ドキュメントと運用導線の不足
- README、設計メモ、実行手順、デプロイ手順が見当たりません。
- 新規参加者が「何から着手すべきか」を判断しづらい状態です。
>>追記）「YGOPRODeck_Sync_Technical_Spec.md」を参考に時期作業者が作成必須

---

## 2. 次作業者が直近で対応すべき課題（優先順）

### 優先度A（最優先：着手可能状態の構築）
1. **プロジェクト目的の明文化**
   - 1ページで良いので「何を解決するdaemonか」を文章化。
   - 最低限、入力・処理・出力・監視対象を定義。

2. **最小構成の作成**
   - `README.md`（概要、セットアップ、実行方法）
   - `requirements.txt` へ最低限依存を記載（仮でも可）
   - `src/` または同等の実装ディレクトリ作成

3. **起動確認できる最小実装（MVP）**
   - `main` エントリポイントを用意し、daemon相当のループまたはジョブ実行の雛形を作成。
   - ログ出力（開始・終了・異常）だけでも先に実装。

### 優先度B（品質・継続開発の土台）
4. **テストと静的解析の導入**
   - 単体テスト1本以上（スモークテスト可）。
   - `ruff` / `pytest` など基本ツールを導入し、実行コマンドをREADMEに記載。

5. **運用観点の基本設計**
   - 失敗時リトライ方針、終了コード、ログローテーション方針を整理。
   - `.env.example` 等で環境変数の管理方法を明示。

### 優先度C（将来拡張）
6. **CI/CDの整備**
   - PR時に lint/test が走る最小ワークフローを追加。

7. **監視・通知の整備**
   - 異常終了時通知（Slack/メール等）やヘルスチェック導線を検討。

---

## 3. 不明点（要確認）
- このリポジトリは初期化直後か、ファイル欠落状態か。
- 既存の設計資料・別リポジトリが存在するか。
- 実行環境の想定（ローカル常駐 / Docker / サーバ常駐 / サーバレス）
- 許容停止時間・処理頻度など運用品質の要求レベル。

---

## 4. 引き継ぎメモ（短縮版）
- **現状は「実装以前の初期化フェーズ」**です。
- まずは「目的定義 → 最小実装 → 実行確認」の順で土台を作るのが最短です。
- 仕様不在のまま詳細実装に入ると手戻りが大きいため、先にREADMEへ要件を固定してください。

---

## 5. 対応実施結果（2026-02-15）

次作業者向け課題に対して、以下を実施。

- `README.md` を新規作成し、目的・セットアップ・実行方法・品質チェック手順を明記。
- `requirements.txt` にランタイム依存（`requests`）と基本開発ツール（`pytest`, `ruff`）を追加。
- `tests/test_main.py` を追加し、以下の単体テストを作成。
  - `extract_konami_id` の抽出ロジック
  - APIクライアントの指数バックオフ付きリトライ成功ケース
  - APIクライアントの最大試行失敗ケース
- `main.py` の API 呼び出し部に指数バックオフ付きリトライを実装（429/5xx、通信系例外に対応）。

未完了／環境依存事項：

- 現環境では `pip install -r requirements.txt` がプロキシ制約で失敗するため、`pytest` 実行は依存不足で未完了。
